

4년넘게 백엔드 개발자로 일한김에 백엔드에 필요한 것들을 하나하나 정리해보려한다. (Node.js 환경위주로)

내가 생각하는 백엔드의 기본 흐름은 아래와 같다.

# 백엔드
: 클라이언트의 요청을 잘 처리

0. 언어에 맞는 방식으로 코드를 잘 짜서 서버를 만든다.
1. 클라이언트의 요청을 잘 전달받는다.
2. 데이터를 잘 저장한다.
3. 데이터를 가져온다.
4. 가져온 데이터를 이용하여 클라가 원하는걸 계산해준다.
5. 클라의 요청이 많아져도 빠른 속도를 유지하며 안정적으로 처리한다.(동시성, 병렬성)
6. 클라이언트에게 완료된 데이터를 잘 전달한다.

위 내용을 바탕으로 서버의 구축 과정을 생각해보자.

0. 언어에 맞는 방식으로 코드를 잘짠다.
1. 만든 서버를 클라이언트의 요청을 받을 수 있도록 네트워크에 연결한다..<br>
 => **네트워크**가 잘 구성돼있어야한다.
2. 요청에서 받은 데이터를 저장할 필요가 있어 **데이터베이스**를 추가한다.
3. DB에 저장된 데이터를 활용하여 **연산**한다.
4. 클라이언트 요청이 늘어나 더많은 서버가 필요해진다. <br>
    => **같은 데이터에 동시에/비슷한 시간에 접근할 일이 많아진다. 데이터의 값을 같은 시간에 접근하여 수정한다면 문제가 발생한다.** <br>
    => 동시에 접근해 데이터를 건드릴 때 데이터를 안정적으로 유지하는 방법이 필요하다.
    - Database단 기본 제공 기능: MVCC, LOCK
5. 데이터베이스의 기본적인 동시성 제어로는 한계가 있다. => **어플리케이션단 잠금, 분산 잠금**

> 동시성 문제는 어느정도 해결 됐다. 이제 성능을 높여보자.

7. 자주이용하는 데이터는 가까운 곳에 저장해두자. 
    1. Cache
    2. 미디어 저장소인 S3도 제대로 알고 넘어가자. s3를 제대로 관리안해 비용이 많이 나오는 회사 많이 봤다.

> 이제 안정성을 높여야한다.

8. HTTP요청는 유실될 위험이 있다. message queue 방식으로 요청에 대한 유실 위험을 없애자.
<!-- - 한번에 HTTP로 요청하면 문제가 발생할수 있다. 데이터를 처리할수 있는만큼만 처리하게 해준다.
- message queue는 요청을 먼저 안전한 곳에 저장해준다. -->
9. 많은 양의 데이터를 전송해야할때는 streaming을 이용한다.

> Message queue를 이용한다고해도 요청이 늘어남에 따라 API서버 갯수를 늘려야한다.

10. auto scailing

> 기본 보안 사항인 네트워크를 적절히 설정해야한다.

11. 이용하는 클라우드의 네트워크 구조를 잘 알아야 해킹을 안당한다.
12. 네트워크 구조를 잘 알면 인프라 비용도 크게 줄일수 있다.

> 추가로 실시간 양방향 기능이 필요하다면

13. 실시간 양방향 통신이 필요하다면 socket.io



#### 동시성 ####
# DB
1. MVCC
2. Constraint
 : 동시에 데이터를 추가하면 에러를 발생시켜 두번 만들어지지않게 해준다.

# APPLICATION
1. 낙관적 락
2. 비관적 락

# 분산 락 - REDIS

# 이벤트 방식 - KAFKA
1. 이벤트가 발생한 순서대로 처리하므로 동시성 문제가 최소화된다.

#### 일관성 ####
# 분산 트랜잭션 
# exactly once

#### 확장성 ####
코드

#### 가용성 #### 
시스템이 고장 없이 지속적으로 서비스를 제공할 수 있는 능력입니다. 고가용성(High Availability, HA)을 위해 장애 조치(Failover), 데이터 복제, 무중단 배포(Zero-downtime Deployment) 등이 필요합니다.

#### 내결함성 Fault Tolerance ####
시스템이 일부 구성 요소에 문제가 생기더라도 전체 시스템이 정상적으로 작동할 수 있는 능력입니다. 장애 조치 메커니즘, 분산 시스템에서의 데이터 복제 및 체크포인트, 리트라이 로직 등이 여기에 해당합니다.

#### 성능 (Performance) ####
시스템의 응답 시간, 처리 속도 등이 일정 수준 이상으로 유지되어야 합니다. 성능 튜닝, 최적화된 쿼리 작성, 캐싱, 비동기 처리를 통해 성능을 개선할 수 있습니다.

#### 유지보수성 (Maintainability) ####

