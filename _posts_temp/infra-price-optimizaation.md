인프라 비용 줄이기 시도 가능한 목록이다. 경험한 것 + 타인에게 들은 것 + 생각나는 것 모두 적었기 때문에 당연한 내용이 꽤 있을 수 있다.

개발자 친구들과 이야기하다보면 큰회사가 아니거나 트레픽이 크지도 않은데도 불구하고 자기네 회시는 월에 1000만원 나간다. 3천만원나간다. 이런 말이 많이 들린다. 바쁘다는 핑계로 리드들이 크게 신경을 쓰지않는 모양이다. 투자금이 많거나 흑자가 크다면야 상관없겠지만 그돈으로 사람더 뽑는게 좋지 않을까 자주 생각한다. 나 또한 지금 회사에 입사하고나서 인프라 비용이 이상하게 많이 나가길래 이사들에게 건의해서 AWS비용을 꽤나 많이 줄였다. (달에 300정도 줄였다.)

내가 직접 경험한 것과 주변에서 들은 내용까지 (어이없던 내용까지) 다 정리하려고 한다.


0. API 최적화
성능이 너무 안받쳐준다면 인프라 오토스케일링이 의미가 없어진다. 쓸데없이 컴퓨터가 더돌아가고 있는거니말이다.

대표적으로 Node.js 프로그램는 IO bound 최적화 언어이다보니 CPU를 너무 많이 쓰면 API성능이 느려진다.

# 쿼리 최적화

# 캐시이용하

# 잠깐 쓰는 인스턴스는 스팟인스턴스로.

# s3 직접이용대신 cloudfront 이용

# 정적콘텐츠 사이즈 줄여서 이용.
s3와 관련된 내용이다. 최적화되어있지 않으면 네트워크 오가는 사이즈가 커지니 당연히 비용이 커진다.

# 서버 디스크 사이즈 줄이기

# 최대한 외부망 요청하지않
https://aws.amazon.com/ko/blogs/containers/how-to-use-multiple-load-balancer-target-group-support-for-amazon-ecs-to-access-internal-and-external-service-endpoint-using-the-same-dns-name/

# 로그 데이터도 s3에 저장하면 비쌀수 있다. s3보다 저렴한 서비스에 옮기는 것도 절약방법이 된다.

# 모니터링을 잘 이용.
cpu, memory, api, 쿼리, 500에러는 기본
4xx 에러들도 너무 많이 발생하면 서비스의 기획/디자인이 안좋은걸수도 있어서 회의때 공유해주면 좋다.


# 달력에 정기점검 시간 설정해두기.
개발도중에 이용하는 인스턴스들을 안지우는 경우들이 꽤 많다.
micro 인스턴스도 3~4만원하는 시대에 이것 하나하나 다 아깝다. 달력에 2달에 하루는 예약해두고 다같이 이용하지않는 것들은 지우는 시간을 가져야한다.

# ec2 모델에 대한 공부도 필요하다.
ec2는 버전이 많다.
그런데 이거까지 개발자가 하긴 오바고 시도할걸 다해봤다면 공부해보자.

# 오토스케일링을 실행하는 서버의 개별 노드의 사양은 클필요가 없다.
다른 언어는 잘모르겟으나 node.js는 메모리가 그리 클필요가 없다. IO bound기때문에 cpu와 네트워크 성능이 좀더 중요하다. 그런데 CPU도 4개짜리가 필요하지는 않다. cpu 2개 짜리 여러개 돌리는게 더 좋다.

Zigup aws 비용 1/3로 줄이기.
- 캐시



- https://tech.inflab.com/20240227-finops-for-startup/
- https://www.ciokorea.com/news/239194